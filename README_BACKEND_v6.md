PrathamOne â€” Full Backend v2 (AUTOGENERATED) - 2025-12-03T19:07:09.790211 UTC

What was added:
- Full DB schema with RLS: scripts/full_schema_with_rls.sql
- Auth pages: /auth/signin, /auth/signup, /auth/forgot
- Middleware protection (middleware.js) checks for Supabase access cookie 'sb-access-token'
- Dashboard UI: /dashboard with My Books and My Projects (calls /api/my/books)
- Admin UI: /admin
- Admin APIs and My APIs (app/api/*)
- SQL helpers for RPC: scripts/helpers_list_users.sql
- BACKEND_README.txt updated (see file for quick steps)

Important security notes and required actions:
1) Run scripts/full_schema_with_rls.sql in Supabase SQL editor to create tables and RLS policies.
2) Create RPC 'list_users' or remove reference if your Supabase plan doesn't allow it.
3) Set these environment variables in Vercel (Production):
   - NEXT_PUBLIC_SUPABASE_URL
   - NEXT_PUBLIC_SUPABASE_ANON_KEY
   - SUPABASE_SERVICE_ROLE_KEY (SECRET)
4) In Supabase Auth > Settings, enable email signups and Google OAuth provider, add redirect URL(s):
   - https://your-vercel-domain.vercel.app/auth/callback
   - https://your-vercel-domain.vercel.app/
5) Middleware assumes Supabase client writes cookies 'sb-access-token' & 'sb-refresh-token' (Supabase client does this automatically in browser). Confirm cookie behavior for SSR pages.
6) After deploying, test flows: signup, signin, create project, view dashboard, admin endpoints.
7) For production, restrict SUPABASE_SERVICE_ROLE_KEY to server-side only (Vercel environment secret) and never expose it publicly.

Security reminder: The supplied code is a scaffold to accelerate development. Before production, perform a security audit, ensure proper token validation in server APIs (verify JWTs), and tighten RLS policies if needed.


# V3 added: storage helpers, upload-url API, admin approve API, JWT verify helper, full_schema_v3.sql


# V4 added: Dashboard books/templates/upload UI, admin manage pages, manuscripts API, notifications API, certificates API, storage upload flow.


# V5 added: secure JWT checks in APIs, storage list/delete, templates save API, role management API, manuscript manager UI, files manager UI, templates editor, admin roles UI, notifications mark-read. 2025-12-03T19:20:53.241512 UTC


# V6 added: profile API + UI, role derivation from profiles, book->project linking, manuscript->book linking, user storage mylist API, template validation, updated middleware to use profiles. 2025-12-03T19:24:51.060574 UTC
